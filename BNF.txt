<saltoLinea> ::= "\n"
# Números, variables y asignaciones:
<espacio> ::= " " | "\t"
<espacio> ::= <saltoLinea>
<espaciosEnBlanco> ::= <espacio>* 
# -- Definir los tipos
<flotante> ::= (0.0) |-?0\ . [0-9]* [1-9]+|-?[1-9][0-9]* . ([0-9]*[1-9]+|0)

<entero> ::=  -? [1 - 9] [0 - 9]* | 0

<enteroPositivo> ::= [1 - 9] [0 - 9]* | 0

#-- Las comillas son para indicar que es un simbolo literal terminal.
<booleano> ::=  "true" | "false"    

#-- En teoria esto: '[^']'     Significa, cualquier caracter menos la comilla ()')
<char> ::= "'" <caracterSimple> "'"  # --"'" [^'] "'"

<caracterSimple> ::= [^'\n\r\t] # -- Se definen los caracteres validos.

# -- Es un caracter cero o mas veces, tambien puede ser caracteres especiales como tabulaciones y saltos de linea.
<string> ::= "\"" (<caracterString> | <caracterEscape>)* "\"" 

<stringSimple> ::= [^"\n\r\t\\] # -- Se definen los caracteres validos

<StringEscape> ::= "\\n" | "\\t" | "\\r" # -- Se definen los caracteres especiales validos.



<operadorAritmetico> ::= <operadorAritmeticoBase> | <operadorAritmeticoMDM> | <operadorAritmeticoPotencia> #(\+|\-|\*|\/|\/\/|%|\^)  #--[+\ | - | *\ | / | //]

<operadorAritmeticoBase> ::= (\+|\-)

<operadorAritmeticoMDM> ::= (\*|\/|\/\/|%)

<operadorAritmeticoPotencia> ::= (\^) 

<operadorLogico> ::= (@|~|Σ)

<operadorRelacional> ::= <operadorRelacionalMayores> | <operadorRelacionalIgualdad>

<operadorRelacionalMayores> ::= ("<="|">="|"<"|">")

<operadorRelacionalIgualdad> ::= ("=="|"!=")

<cAsignacion> ::= \=

<id> ::= [a-z A-Z ] [a-z A-Z 0-9 _]*

<delimitador> ::= $

<tipoVar> ::= "int" | "float" | "boolean" | "char" | "string" 

<tipoInput> ::= "int" | "float"

<tipoFuncion> ::= "int" | "float" | "boolean"

# -- Tipos de datos para definir listas.
<tipoLista> ::=  <tipoListaBase> | <tipoListaTamaño>

<tipoListaBase> ::= "int" "[" "]" | "char" "[" "]"

<tipoListaTamaño> ::= "int" "[" <entero> "]" | "char" "[" <entero> "]"

# -- Definir variables.
<var> ::= <varCreacion> | <varCyAsignacion>

<varCreacion> ::= "let" <espacio> <tipoVar> <espacio> <id> <delimitador>

<varAsignacion> ::= <id> <espacio> <cAsignacion> <espacio> <expresion> <delimitador> | <id> <espacio> <funcionLlamada> <delimitador>

<varCyAsignacion> ::= "let" <tipoVar> <id> <cAsignacion> <expresion> <delimitador>



# -- Las exresiones para una variables puden ser: nada mas numeros o caracteres, una operacion aritmetica o de union de caracteres, 
# -- tambien puede ser entrada de teclado o tambien se podria hacer una condicional para saber asignar un valor booleano.
<expresion> ::= <expresionNumerica> | <expresionAritmetica> | <expresionChar> | <expresionString> | <expresionBooleana> | <expresionLogica> | <expresionRelacional>

#-- Def de expresiones basicos.
<expresionNumerica> ::= <entero> | <flotante> | <id> | <obtenerElementoLista> | <funcionLlamada> | <input> | <booleano>

<expresionChar> ::= <char> | <id> | <obtenerElementoLista>

<expresionString> ::= <string> | <id>

<expresionBooleana> ::= <booleano> | <id>


# -- Def de operaciones de expresiones, Construccion con orden de precedencia.
#<expresionAritmetica> ::= <expresionNumerica> | \( <expresionAritmetica> \) | <expresionAritmetica> <operadorAritmetico> <expresionAritmetica>

# -- La expresion aritmetica base.
<expresionAritmetica> ::= <expresionSuma>

# -- La base se puede formar por una operacion base o por una de prodcutos.
<expresionSuma> ::= <expresionSuma> <espaciosEnBlanco> <operadorAritmeticoBase> <espaciosEnBlanco> <expresionProducto>
                 | <expresionProducto>

# -- La de prodcuto esta conformada por la de productos o la de potencia.
<expresionProducto> ::= <expresionProducto> <espaciosEnBlanco> <operadorAritmeticoMDM> <espaciosEnBlanco> <expresionPotencia> #("*" | "/" | "//" | "%")
                      | <expresionPotencia>

# -- La de potencia esta formada por potencia o una de factor.
<expresionPotencia> ::= <expresionFactor> <espaciosEnBlanco> <operadorAritmeticoPotencia> <espaciosEnBlanco> <expresionPotencia>
                      | <expresionFactor>

# -- La de factor es el termino base para cualquier expresio aritmetia 
<expresionFactor> ::= "є" <espaciosEnBlanco> <expresionAritmetica> <espaciosEnBlanco> "э"
                    | <expresionNumerica>
                    | <expresionAritmeticaUnaria>
                    | <expresionAritmeticaUnariaNegativa>


# --Posfija
<expresionAritmeticaUnaria> ::= <id> "++" | <id> "--"

# -- Esto es basicamente para volver un valor negativo, por ejemplo: - 5 | - 3.34 | - x
<expresionAritmeticaUnariaNegativa> ::= "-" <expresionNumerica>


#<expresionLiteral> ::= <expresionLiteral> \+ <expresionLiteral> # Esto no deberia de poder hacerse.


# -- (@|~|Σ)
<expresionLogica> ::= <expresionRelacional>
                    | "є" <espaciosEnBlanco> <expresionLogica> <espaciosEnBlanco> "э"
                    | <expresionLogica> <espaciosEnBlanco> <operadorLogico> <espaciosEnBlanco> <expresionLogica>
                    | <operadorLogico> <espaciosEnBlanco> <expresionLogica>

# -- (==|!=|<=|>=|<|>)
<expresionRelacional> ::= <expresionAritmetica> <espaciosEnBlanco> <operadorRelacional> <espaciosEnBlanco> <expresionAritmetica> 
                        | <expresionBooleana> <espaciosEnBlanco> <operadorRelacionalIgualdad> <espaciosEnBlanco> <expresionBooleana> 
                        | <expresionChar> <espaciosEnBlanco> <operadorRelacional> <espaciosEnBlanco> <expresionChar> 
                        | "є" <espaciosEnBlanco> <expresionRelacional> <espaciosEnBlanco> "э"
                        #-- | <expresionChar> <operadorRelacional> <expresionChar> 
                        #-- | <expresionString> <operadorRelacional> <expresionString>


# Funciones con estructuras de control, bloques y sentencias:
<funciones> ::= <funcion> | <funciones> <funcion>

<funcion> ::= <tipoFuncion> <espaciosEnBlanco> <id> <espaciosEnBlanco> "є" <espaciosEnBlanco> <params> <espaciosEnBlanco> "э" <bloque> | <tipoFuncion> <espaciosEnBlanco> <id> <espaciosEnBlanco> "є" <espaciosEnBlanco> "э" <espaciosEnBlanco> <bloque>

<params> ::= <param> | <params> , <param>

<param> ::= <tipoVar> <espaciosEnBlanco> <id>

<bloque> ::= ¿ <espaciosEnBlanco> <sentencias> <espaciosEnBlanco> \?

<sentencias> ::= <sentencias>

<sentencias> ::= <sentencia> | <sentencias> <sentencia>

<sentencia> ::= (<var> | <varAsignacion> | <estructruraControl> | <comentarios> | <funcionLlamada> | <return> | <break> | <output> | <modificarElementoLista> | <lista> | <varGlobal>) <espaciosEnBlanco>*

<estructruraControl> ::= <decide> | <loop> | <for> # luego se definen abajo

# Decide es de la forma decide of (condicion -> bloque)+ (else -> bloque)? end decide opcional
<decide> ::= "decide" <espacio> "of" <espaciosEnBlanco> ( <condicion> "->" <bloque>)+ ("else" <bloque> )? "end" <espaciosEnBlanco> "decide" <delimitador>

<condicion> ::= "є" <expresion> "э"

# Loop es de la forma loop instrucciones... exit wgen condicion$ end loop$
<loop> ::= "loop" <sentencias> <break>? "exit when" <condicion> <espaciosEnBlanco> <delimitador> "end" <espaciosEnBlanco> "loop" <espaciosEnBlanco> <delimitador>

# For es de la forma for <id> step <entero> to/downto <expresion> do bloque
<for> ::= "for" <espaciosEnBlanco> <id> <espaciosEnBlanco> "step" <espaciosEnBlanco> <entero> <espaciosEnBlanco> ("to" | "downto") <espaciosEnBlanco> <expresion> <espaciosEnBlanco> "do" <bloque> <delimitador>

<funcionLlamada> ::= <id> <espaciosEnBlanco> "є" <params> "э" <espaciosEnBlanco> <delimitador> | <id> <espaciosEnBlanco> "є" "э" <delimitador>

<return> ::= "return" <espaciosEnBlanco> <expresion> <espaciosEnBlanco> <delimitador> | "return" <espaciosEnBlanco> <delimitador>

<break> ::= "break" <espaciosEnBlanco> <delimitador>

# El output puede ser de la forma output є expresion э o output є expresion э << output para multiples outputs en una linea.
<output> ::= <output> <espaciosEnBlanco> <delimitador>
<output> ::= <output_inline> | <output> <espaciosEnBlanco> "<<" <espaciosEnBlanco> <output_inline>

<output_inline> ::= "output" "є" <expresion> "э"

# Input puede ser de la forma input є tipo э
<input> ::= "input" "є" <espaciosEnBlanco> <tipoInput> <espaciosEnBlanco> "э" 


# Variables globales:

<varGlobal> ::= <varGlobalAsignacion> | <varGlobalCreacion>
<varGlobalAsignacion> ::= "global" <espaciosEnBlanco> <tipoVar> <espaciosEnBlanco> <id> <espaciosEnBlanco> <cAsignacion> <espaciosEnBlanco> <expresion> <espaciosEnBlanco> <delimitador>
<varGlobalCreacion> ::= "global" <espaciosEnBlanco> <tipoVar> <espaciosEnBlanco> <id> <espaciosEnBlanco> <delimitador>

# Tipos de variables enteras, flotantes, booleanas, caracteres, cadenas de caracteres y arreglos:

# >>> Arreglos tipo char y entero; get y update de elementos, ser usados en expresiones y permitir creacion con asignacion:

# Declarar listas

<lista> ::= <declaracionLista> | <creacionYAsignacionLista>

# -- Declarar listas de forma basica
<declaracionLista> ::= "let" <espaciosEnBlanco> <tipoLista> <espaciosEnBlanco> <id> <espaciosEnBlanco> <delimitador>

# -- Esto es para crear una lista con asignacion: let int[] = ¿12,34?
<creacionYAsignacionLista> ::= "let" <espaciosEnBlanco> <tipoLista> <espaciosEnBlanco> <id> <espaciosEnBlanco> <cAsignacion> <espaciosEnBlanco> "¿" <espaciosEnBlanco> <elementos> <espaciosEnBlanco> "?" <espaciosEnBlanco> <delimitador> #<elementoLista> ("," <elementoLista>)*

#<elementos> ::= <elementoLista>

<elementos> ::= <elementoLista> <espaciosEnBlanco> ("," <espaciosEnBlanco> <elementoLista>)* #<elementos> "," <elementoLista>  

# -- Tipos de datos que puede tener una lista.
<elementoLista> ::= <entero> | <char>

# -- Modificar los elementos de una lista: lista[4] = 23$
<modificarElementoLista> ::= <id> "[" <espaciosEnBlanco> <enteroPositivo> <espaciosEnBlanco> "]" <espaciosEnBlanco> <cAsignacion> <espaciosEnBlanco> <elementoLista> <espaciosEnBlanco> <delimitador> | <id>  "[" <espaciosEnBlanco> <id> <espaciosEnBlanco> "]" <cAsignacion> <espaciosEnBlanco> <elementoLista> <espaciosEnBlanco> <delimitador>

# -- Obtener los elementos de una lista: lista[4]    -> Esto puede ser usado en otras expresiones por lo que no lleva delimitador
<obtenerElementoLista> ::= <id> "[" <espaciosEnBlanco> <enteroPositivo> <espaciosEnBlanco> "]" | <id> "[" <espaciosEnBlanco> <id> <espaciosEnBlanco> "]"

# Definición de unicamente un procedimiento main (principal) tipo void sin parametros:

# -- Def de main, puede cambiarse 
<principal> ::= "void" <espaciosEnBlanco> "principal" <espaciosEnBlanco> "є" <expresion> "э" <bloque>

#-- Def de un programa.
<programa> ::= <comentarios>? (<varGlobal>*)? <comentarios>? <funciones>? <comentarios>? <principal> <comentarios>?

# Comentarios en una linea o en multiples lineas:

# -- Todo los comentarios permitidos.
<comentarios> ::= <comentario> | <comentarios> <comentario>

<comentario> ::= <comentarioLinea> | <comentarioBloque>

# -- Se permite cualquier cosa menos lo que serian los saltos de linea.
<comentarioLinea> ::= \|[^\n\r]*

# -- Se permite cualquier caracter o o mas veces y puede o no tener .
<comentarioBloque> ::= ¡[\s\S]*?! #Aqui van los controles de flujo, funcion, loops, numeros, letras, 



